# Application Configuration - Secure Version
# All security-related properties are configured for maximum protection

# Application Name and Version
spring.application.name=Module2.1-Secure
application.version=1.0.0
application.description=Secured Spring Boot Demo - 144/162 CVEs fixed (18 Tomcat CVEs tracked until upstream patch)

# Server Configuration
server.port=8080
server.address=0.0.0.0

# Error Handling - Never expose sensitive information
server.error.include-message=never
server.error.include-stacktrace=never
server.error.include-exception=false
server.error.include-binding-errors=never
server.error.whitelabel.enabled=false

# Session Security Configuration
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=strict
server.servlet.session.timeout=30m
server.servlet.session.cookie.name=SECURE_SESSIONID
server.servlet.session.cookie.max-age=1800

# Security Headers (Additional to SecurityConfig)
server.forward-headers-strategy=native

# Disable unnecessary features that could be attack vectors
spring.jmx.enabled=false
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# Actuator Security (if enabled in future)
management.endpoints.enabled-by-default=false
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never
management.endpoint.health.show-components=never
management.security.enabled=true

# Logging Configuration for Security Auditing
logging.level.root=INFO
logging.level.com.snhu.Module21=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/application-secure.log
logging.file.max-size=10MB
logging.file.max-history=10

# Request Size Limits - Prevent DoS attacks
server.tomcat.max-http-form-post-size=2MB
spring.servlet.multipart.max-file-size=2MB
spring.servlet.multipart.max-request-size=2MB

# Connection Pool Security
server.tomcat.max-threads=200
server.tomcat.min-spare-threads=10
server.tomcat.accept-count=100
server.tomcat.connection-timeout=20000

# Jackson Configuration - Prevent serialization attacks
spring.jackson.serialization.fail-on-empty-beans=false
spring.jackson.deserialization.fail-on-unknown-properties=true
spring.jackson.deserialization.fail-on-ignored-properties=true

# HTTP/2 Support (if using HTTPS)
server.http2.enabled=true

# Compression (optional, for performance)
server.compression.enabled=true
server.compression.mime-types=application/json,application/xml,text/html,text/xml,text/plain

# Validation
spring.mvc.throw-exception-if-no-handler-found=true
spring.web.resources.add-mappings=false

# Banner
spring.banner.location=classpath:banner-secure.txt
